# GUI数据管理器搜索功能说明

## 功能概述

GUI数据管理器现在支持强大的模糊搜索功能，可以搜索key和value的部分内容，并将结果显示在列表中，支持按数据格式格式化显示。

## 主要功能

### 1. **模糊搜索**
- 支持搜索key的部分内容（不需要完整key）
- 支持搜索value的部分内容
- 支持同时搜索key和value
- 不区分大小写

### 2. **搜索模式选择**
- **全部**：同时搜索key和value
- **键**：只搜索key
- **值**：只搜索value

### 3. **实时搜索**
- 输入时自动搜索（延迟500ms，避免频繁搜索）
- 支持回车键快速搜索
- 支持清除搜索按钮

### 4. **格式化显示**
- 搜索结果按数据格式自动格式化显示
- 支持JSON、XML、Binary、Geo、IP、Enum、Tree等格式
- 在列表中显示格式标识（如[JSON]、[XML]等）

### 5. **列表显示**
- 搜索结果直接显示在数据列表中
- 显示匹配的key、value预览、版本、时间戳
- 最多显示1000条结果（避免界面卡顿）

## 使用方法

### 基本搜索

1. **连接数据库**
   - 点击"文件" -> "连接数据库"
   - 选择要搜索的数据库

2. **输入搜索关键词**
   - 在搜索框中输入关键词（不需要完整key）
   - 例如：输入 `user` 可以找到所有包含 `user` 的key或value

3. **选择搜索模式**
   - 选择"全部"：搜索key和value
   - 选择"键"：只搜索key
   - 选择"值"：只搜索value

4. **查看结果**
   - 搜索结果自动显示在列表中
   - 双击记录可以查看详情（格式化显示）

### 搜索示例

#### 示例1：搜索key包含"user"的记录
```
搜索关键词: user
搜索模式: 键
结果: 显示所有key中包含"user"的记录
```

#### 示例2：搜索value包含"北京"的记录
```
搜索关键词: 北京
搜索模式: 值
结果: 显示所有value中包含"北京"的记录
```

#### 示例3：搜索key或value包含"block"的记录
```
搜索关键词: block
搜索模式: 全部
结果: 显示所有key或value中包含"block"的记录
```

#### 示例4：搜索IP地址
```
搜索关键词: 192.168
搜索模式: 全部
结果: 显示所有包含"192.168"的key或value（可能是IP地址）
```

#### 示例5：搜索JSON中的字段
```
搜索关键词: "name"
搜索模式: 值
结果: 显示所有value中包含"name"的记录（可能是JSON格式）
```

## 功能特点

### 1. **智能匹配**
- 支持部分匹配（模糊搜索）
- 不区分大小写
- 支持二进制数据的hex搜索

### 2. **性能优化**
- 实时搜索延迟500ms，避免频繁搜索
- 最多显示1000条结果
- 状态栏显示匹配数量

### 3. **格式化显示**
- 自动检测数据格式
- 在列表中显示格式标识
- 双击记录查看完整格式化内容

### 4. **用户体验**
- 支持回车键快速搜索
- 支持清除搜索按钮
- 搜索框为空时显示所有数据

## 界面说明

### 搜索区域
```
[刷新] [添加] [编辑] [删除] [搜索]  ...  [搜索: ________] [全部○ 键○ 值○] [搜索] [清除]
```

- **搜索框**：输入搜索关键词
- **搜索模式**：选择搜索范围（全部/键/值）
- **搜索按钮**：执行搜索
- **清除按钮**：清除搜索，显示所有数据

### 结果列表
```
键 (Key)          | 值 (Value)              | 版本 | 时间戳
-----------------|------------------------|------|----------
user:001         | [JSON] {"name": "张三"} | 1    | 2024-01-13
block:00000001   | [JSON] {"block_num...} | 1    | 2024-01-13
ip:192.168.1.1   | [IP] IPv4地址          | 1    | 2024-01-13
```

## 注意事项

1. **性能考虑**
   - 对于大数据量（百万级以上），搜索可能需要一些时间
   - 建议使用更具体的搜索关键词缩小范围

2. **搜索限制**
   - 最多显示1000条结果
   - 如果匹配结果超过1000条，状态栏会显示实际匹配数量

3. **二进制数据**
   - 二进制数据会尝试hex搜索
   - 如果搜索关键词是十六进制，可以搜索二进制数据

4. **清除搜索**
   - 点击"清除"按钮或清空搜索框，会显示所有数据
   - 等同于点击"刷新"按钮

## 与CLI的对比

| 功能 | CLI | GUI |
|------|-----|-----|
| 完整key搜索 | ✓ `get <key>` | ✓ 搜索框输入完整key |
| 模糊搜索 | ✓ `select * from <prefix>` | ✓ 搜索框输入部分内容 |
| Value搜索 | ✗ | ✓ 选择"值"模式 |
| 实时搜索 | ✗ | ✓ 输入时自动搜索 |
| 格式化显示 | ✓ `get`命令 | ✓ 列表和详情都格式化 |
| 列表显示 | ✓ `select`命令 | ✓ 搜索结果列表 |

## 更新日期

2026-01-13

